<div class="w-full sm:max-w-xs p-2">
    <label for="email" class="sr-only">Place</label>
    <div class="flex items-center relative">
        <div class="relative rounded-md shadow-xs w-full">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                <svg class="size-5 text-primary-bourgad-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0"/><circle cx="12" cy="8" r="2"/><path d="M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712"/></svg>
            </div>
            <input #searchCountry autocomplete="off" [ngModel]="this.filterPlace" [id]="this.mapId + '-search-country'" [placeholder]="placeholder" type="text" [ngClass]="inputClasses">
            <div class="absolute inset-y-0 right-0 flex items-center">
                @if(this.loading){
                    <bgd-spinner [width]="'w-4'" [dark]="false"></bgd-spinner>
                }
                @if(!this.loading && this.filterPlace !== ''){
                    <svg (click)="this.clear()" class="size-5 text-red-300 cursor-pointer hover:text-red-400" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><path d="m14.5 7.5-5 5"/><path d="m9.5 7.5 5 5"/></svg>
                }
            </div>
        </div>
        @if(townList.length > 0 && this.isVisible){
            <div
            [ngClass]="{
                'bottom-full mb-1': this.senseOfResults === SenseOfResults.TOP,
                'top-full mt-1': this.senseOfResults === SenseOfResults.BOTTOM,
            }"
            class="absolute z-on-map-2 left-0 divide-y divide-gray-200 w-full border-2 border-gray-400 max-h-64 overflow-auto">
                <div class="bg-primary-bourgad text-white flex items-center border-black px-2 py-2">
                    <p class="text-sm">
                        Cliquez sur le résultat pour zoomer sur le lieu
                    </p>
                </div>
                <div (click)="chooseTown(town)" class="cursor-pointer flex items-center bg-white border-black px-2 py-2 hover:text-indigo-400 hover:fill-indigo-400" *ngFor="let town of townList">
                    <img class="size-4 mr-2" src="{{town.getIcon()}}" alt="town.name" />
                    <p title="{{town.label}}" class="text-sm">
                        {{town.label}}
                        <span *ngIf="town.state"> ({{town.state}})</span>
                    </p>
                </div>
            </div>
        }
        @else if(this.filterPlace !== '' && this.isVisible){
            <div [ngClass]="{
                'bottom-full mb-1': this.senseOfResults === SenseOfResults.TOP,
                'top-full mt-1': this.senseOfResults === SenseOfResults.BOTTOM,
            }" class="absolute z-on-map-2 left-0 divide-y divide-gray-200 w-full border-2 border-gray-400">
                <div class="cursor-pointer flex items-center bg-white border-black px-2 py-2">
                    <p title="Aucun résultat" class="text-sm">
                        Aucun résultat trouvé
                    </p>
                </div>
            </div>
        }
    </div>
</div>