<div class="w-full sm:max-w-xs p-2">
    <label for="email" class="sr-only">Place</label>
    <div class="flex items-center relative">
        <div class="relative rounded-md shadow-xs w-full">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3">
                <svg class="size-5 text-primary-bourgad-2" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0"/><circle cx="12" cy="8" r="2"/><path d="M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712"/></svg>
            </div>
            <input autocomplete="off" [ngModel]="this.filterPlace" id="search-country" placeholder="Vous cherchez un lieu ?" type="text" class="block rounded-full bg-black hover:bg-gray-800 pl-10 pr-10 py-1.5 text-base text-gray-400 placeholder:text-gray-400 sm:text-sm/6 w-80 truncate">
            <div class="absolute inset-y-0 right-0 flex items-center">
                <bgd-spinner *ngIf="this.loading" [width]="'w-4'" [dark]="false"></bgd-spinner>
                <svg (click)="this.clear()" *ngIf="!this.loading && this.filterPlace != ''" class="size-5 text-red-300 cursor-pointer hover:text-red-400" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" ><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><path d="m14.5 7.5-5 5"/><path d="m9.5 7.5 5 5"/></svg>
            </div>
        </div>
        @if(townList.length > 0){
            <div *ngIf="isVisible"
            [ngClass]="{
                'bottom-full mb-1': this.senseOfResults == SenseOfResults.TOP,
                'top-full mt-1': this.senseOfResults == SenseOfResults.BOTTOM,
            }"
            class="absolute z-on-map-2 left-0 divide-y divide-gray-200 w-full border-2 border-gray-400 max-h-64 overflow-auto">
                <div class="bg-primary-bourgad text-white flex items-center border-black px-2 py-2">
                    <p class="text-sm">
                        Cliquez sur le résultat pour zoomer sur le lieu
                    </p>
                </div>
                <div (click)="chooseTown(town)" class="cursor-pointer flex items-center bg-white border-black px-2 py-2 hover:text-indigo-400 hover:fill-indigo-400" *ngFor="let town of townList">
                    @switch(town.providerTypeId){
                        @case("ocean"){
                            <svg class="size-4 mr-2" x="0px" y="0px" viewBox="0 0 511.999 511.999">
                                <g>
                                    <g>
                                        <path d="M495.307,381.298c-114.438,0-191.534-40.036-211.521-109.842c-14.42-50.363,6.178-99.952,33.53-117.013
                                            c9.403-5.865,15.116-6.181,26.167-6.676c11.62,0.977,23.612,6.895,35.565,17.684c23.37,21.094,21.555,68.579,20.355,100.001
                                            c-0.709,18.558-1.136,29.76,2.688,37.974c4.352,9.347,14.095,13.87,24.817,11.526c16.494-3.607,34.388-23.38,45.635-40.682
                                            c16.413-25.249,25.53-54.403,25.672-82.092c0.253-49.125-19.27-90.643-56.456-120.072c-33.283-26.34-79.406-41.097-129.866-41.553
                                            c-75.342-0.688-150.936,29.523-207.33,82.917C57.878,157.674,1.854,239.256,0.074,376.899
                                            c-0.442,34.159,1.304,64.259,0.025,86.923c-0.541,9.575,7.089,17.635,16.667,17.635c45.343,0,432.143,0,478.541,0
                                            c9.219,0,16.693-7.474,16.693-16.693v-66.773C512,388.771,504.526,381.298,495.307,381.298z M33.941,448.07
                                            c0.161-20.896-0.82-44.738-0.484-70.738C36.375,151.785,194.862,62.775,311.588,63.941
                                            c76.599,0.692,153.688,40.559,153.238,128.066c-0.181,35.454-18.502,64.534-32.244,79.544c0.059-1.638,0.12-3.264,0.18-4.824
                                            c1.438-37.633,3.61-94.507-31.347-126.059c-19.903-17.964-41.532-26.896-62.703-26.52c-42.838-0.798-84.421,9.68-120.629,30.512
                                            C144.699,186.884,99.782,266.662,99.995,349.464c0.088,34.017,7.893,67.617,22.754,98.606H33.941z M160.522,448.072
                                            c-46.355-79.502-31.447-174.296,28.317-238.241c-12.083,23.789-19.214,50.632-20.631,78.64
                                            c-2.277,45.006,10.352,88.689,35.56,123.002c10.433,14.202,22.717,26.44,36.615,36.599H160.522z M478.614,448.072h-149.97
                                            c-92.615-13.429-130.584-88.867-127.09-157.914c2.14-42.309,20.449-85.448,56.418-113.03
                                            c-14.106,32.67-15.843,70.123-6.282,103.521c11.047,38.582,36.493,71.112,73.586,94.077c39.377,24.377,90.901,37.707,153.339,39.7
                                            V448.072z"></path>
                                    </g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                            </svg>
                        }
                        @case("sea"){
                            <svg class="size-4 mr-2" x="0px" y="0px" viewBox="0 0 511.999 511.999">
                                <g>
                                    <g>
                                        <path d="M495.307,381.298c-114.438,0-191.534-40.036-211.521-109.842c-14.42-50.363,6.178-99.952,33.53-117.013
                                            c9.403-5.865,15.116-6.181,26.167-6.676c11.62,0.977,23.612,6.895,35.565,17.684c23.37,21.094,21.555,68.579,20.355,100.001
                                            c-0.709,18.558-1.136,29.76,2.688,37.974c4.352,9.347,14.095,13.87,24.817,11.526c16.494-3.607,34.388-23.38,45.635-40.682
                                            c16.413-25.249,25.53-54.403,25.672-82.092c0.253-49.125-19.27-90.643-56.456-120.072c-33.283-26.34-79.406-41.097-129.866-41.553
                                            c-75.342-0.688-150.936,29.523-207.33,82.917C57.878,157.674,1.854,239.256,0.074,376.899
                                            c-0.442,34.159,1.304,64.259,0.025,86.923c-0.541,9.575,7.089,17.635,16.667,17.635c45.343,0,432.143,0,478.541,0
                                            c9.219,0,16.693-7.474,16.693-16.693v-66.773C512,388.771,504.526,381.298,495.307,381.298z M33.941,448.07
                                            c0.161-20.896-0.82-44.738-0.484-70.738C36.375,151.785,194.862,62.775,311.588,63.941
                                            c76.599,0.692,153.688,40.559,153.238,128.066c-0.181,35.454-18.502,64.534-32.244,79.544c0.059-1.638,0.12-3.264,0.18-4.824
                                            c1.438-37.633,3.61-94.507-31.347-126.059c-19.903-17.964-41.532-26.896-62.703-26.52c-42.838-0.798-84.421,9.68-120.629,30.512
                                            C144.699,186.884,99.782,266.662,99.995,349.464c0.088,34.017,7.893,67.617,22.754,98.606H33.941z M160.522,448.072
                                            c-46.355-79.502-31.447-174.296,28.317-238.241c-12.083,23.789-19.214,50.632-20.631,78.64
                                            c-2.277,45.006,10.352,88.689,35.56,123.002c10.433,14.202,22.717,26.44,36.615,36.599H160.522z M478.614,448.072h-149.97
                                            c-92.615-13.429-130.584-88.867-127.09-157.914c2.14-42.309,20.449-85.448,56.418-113.03
                                            c-14.106,32.67-15.843,70.123-6.282,103.521c11.047,38.582,36.493,71.112,73.586,94.077c39.377,24.377,90.901,37.707,153.339,39.7
                                            V448.072z"></path>
                                    </g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                            </svg>
                        }
                        @case("volcano"){
                            <svg class="size-4 mr-2" title="Volcan" stroke="currentColor" clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" id="fi_16930503"><path id="path240" d="m24 3c-.552 0-1 .448-1 1v6c0 .552.448 1 1 1s1-.448 1-1v-6c0-.552-.448-1-1-1zm-6.006 6c-.321.002-.635.158-.826.445-.306.46-.182 1.081.277 1.387l3 2c.46.306 1.081.182 1.387-.277.306-.46.182-1.081-.277-1.387l-3-2c-.173-.115-.368-.169-.561-.168zm12.012 0c-.193-.001-.388.053-.561.168l-3 2c-.459.306-.583.927-.277 1.387.306.459.927.583 1.387.277l3-2c.459-.306.583-.927.277-1.387-.191-.287-.505-.443-.826-.445zm-13.156 4c-1.094.023-2.322.51-3.588 1.9-.372.408-.344 1.042.064 1.412.408.373 1.04.342 1.412-.066.871-.954 1.659-1.305 2.383-1.236.677.063 1.259.461 1.725.885.801.728 1.279 1.589 1.279 1.589.268.482.876.659 1.359.391.482-.267.658-.876.391-1.359 0 0-.629-1.139-1.684-2.1-.771-.702-1.762-1.294-2.882-1.398-.151-.015-.303-.021-.459-.018zm14.3 0c-.156-.003-.308.003-.459.018-1.12.104-2.111.696-2.882 1.398-1.055.961-1.684 2.1-1.684 2.1-.267.483-.091 1.092.391 1.359.483.268 1.091.091 1.359-.391 0 0 .478-.861 1.279-1.589.466-.424 1.048-.822 1.725-.885.724-.069 1.512.282 2.383 1.236.372.408 1.004.439 1.412.066.408-.37.436-1.004.064-1.412-1.266-1.39-2.494-1.877-3.588-1.9zm-9.849 6c-.342 0-.66.175-.844.463l-15.006 23.537h-1.451c-.552 0-1 .448-1 1s.448 1 1 1h40c.552 0 1-.448 1-1s-.448-1-1-1h-1.451l-15.006-23.537c-.184-.288-.502-.463-.844-.463zm.547 2h4.304l2.452 3.844-1.752 1.855-2.297-1.531c-.336-.224-.774-.224-1.11 0l-2.297 1.531-1.752-1.855zm-3.561 5.586 1.986 2.102c.335.354.876.414 1.282.144l2.445-1.631 2.445 1.631c.406.27.947.21 1.282-.144l1.986-2.102 10.463 16.414h-32.352z"></path></svg>
                        }
                        @case("river"){
                            <svg title="Rivière" stroke="currentColor" class="size-4 mr-2" enable-background="new 0 0 496 496" height="512" viewBox="0 0 496 496" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m280.345 267.662c-1.248-5.005-3.826-9.668-7.882-14.257-5.852-6.622-5.228-16.733 1.394-22.585s16.732-5.229 22.585 1.394c7.436 8.414 12.466 17.735 14.952 27.706 2.513 10.077-5.11 19.875-15.536 19.875-7.174 0-13.7-4.859-15.513-12.133zm25.813-89.075c-14.607-8.109-31.163-17.302-31.158-23.586.001-1.788 1.916-17.974 66.847-42.011h138.153c8.837 0 16-7.163 16-16s-7.163-16-16-16c-5.499 0-455.144 0-464 0-8.837 0-16 7.163-16 16s7.163 16 16 16h151c-26.56 16.368-40.357 34.693-40.992 54.486-1.682 52.432 86.773 68.701 92.128 109.591 3.589 27.407-33.804 65.817-105.289 108.156-7.604 4.503-10.116 14.317-5.613 21.92s14.314 10.117 21.92 5.613c86.815-51.418 126.301-97.162 120.711-139.844-4.271-32.616-32.453-52.105-57.317-69.3-17.162-11.867-34.907-24.14-34.555-35.109.196-6.128 7.155-28.103 87.647-55.514h24.283c-18.16 13.119-26.913 26.924-26.923 41.988-.049 70.239 182.882 44.036 102.228 237.865-4.408 10.593 3.449 22.15 14.766 22.15 6.27 0 12.221-3.708 14.779-9.857 27.411-65.877 29.844-120.009 7.229-160.891-18.802-33.987-50.431-51.547-75.844-65.657zm23.988 116.197c-8.731-1.261-16.862 4.794-18.129 13.541-1.945 13.427-6.436 27.901-13.347 43.021-4.863 10.639 2.987 22.655 14.542 22.655 6.069 0 11.874-3.472 14.562-9.353 8.177-17.89 13.531-35.296 15.913-51.736 1.267-8.744-4.795-16.86-13.541-18.128zm-39.276 88.516c-12.886 2.784-17.001 18.18-8.181 27 10.59 10.59 28.657 2.033 27.23-12.88-.888-9.276-9.635-15.96-19.049-14.12zm-193.87-159.31c0-8.837-7.163-16-16-16h-51c-8.837 0-16 7.163-16 16s7.163 16 16 16h51c8.837 0 16-7.163 16-16zm60 69c0-8.837-7.163-16-16-16h-80c-8.837 0-16 7.163-16 16s7.163 16 16 16h80c8.837 0 16-7.163 16-16zm224-153c-8.837 0-16 7.163-16 16s7.163 16 16 16h67c8.837 0 16-7.163 16-16s-7.163-16-16-16zm99 83h-34c-8.837 0-16 7.163-16 16s7.163 16 16 16h34c8.837 0 16-7.163 16-16s-7.163-16-16-16zm-30 84h-12c-8.837 0-16 7.163-16 16s7.163 16 16 16h12c8.837 0 16-7.163 16-16s-7.163-16-16-16z"></path></svg>
                        }
                        @case("peak"){
                            <svg title="Montagne" class="size-4 mr-2" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg>
                        }
                        @case("mountain_range"){
                            <svg title="Chaine de montagnes" class="size-5 mr-2" x="0px" y="0px" viewBox="0 0 355.175 355.175">
                                <g>
                                    <path d="M346.175,191.576h-46.989l-33.557-36.854c-3.194-3.508-8.563-3.934-12.27-0.975l-20.818,16.62l-54.918-86.747
                                        c-1.65-2.606-4.52-4.186-7.604-4.186s-5.954,1.58-7.604,4.186l-46.893,74.071L97.94,131.962c-1.677-2.454-4.458-3.922-7.431-3.922
                                        s-5.753,1.468-7.431,3.922L42.34,191.576H9c-4.971,0-9,4.029-9,9s4.029,9,9,9h21.039l-7.162,10.479
                                        c-2.805,4.104-1.751,9.704,2.353,12.509c1.553,1.062,3.321,1.57,5.07,1.57c2.873,0,5.696-1.373,7.439-3.923l3.47-5.078
                                        l49.301-72.141l14.529,21.261l-32.212,50.881l-23.292,36.792c-2.659,4.2-1.41,9.759,2.79,12.418
                                        c1.494,0.945,3.159,1.396,4.806,1.396c2.981,0,5.899-1.481,7.612-4.187l4.277-6.756l101-159.536l82.055,129.612l2.049,3.236
                                        c2.658,4.199,8.218,5.448,12.418,2.79c3.822-2.42,5.19-7.24,3.402-11.253c-0.177-0.396-0.373-0.788-0.612-1.165l-27.104-42.813
                                        l15.771-12.591l54.048,59.359l6.299,6.918c1.776,1.951,4.212,2.941,6.657,2.941c2.163,0,4.332-0.775,6.057-2.345
                                        c3.675-3.347,3.942-9.039,0.596-12.714l-16.08-17.66h30.6c4.971,0,9-4.029,9-9S351.146,191.576,346.175,191.576z"></path>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                            </svg>
                        }
                        @default {
                            <img class="w-4 mr-2" src="https://flagcdn.com/{{town.countryCode | lowercase }}.svg" />
                        }
                    }
                    <p title="{{town.label}}" class="text-sm">
                        {{town.name}}
                        <span *ngIf="town.state"> ({{town.state}})</span>
                    </p>
                </div>
            </div>
        }
        @else if(this.filterPlace != ''){
            <div *ngIf="isVisible" [ngClass]="{
                'bottom-full mb-1': this.senseOfResults == SenseOfResults.TOP,
                'top-full mt-1': this.senseOfResults == SenseOfResults.BOTTOM,
            }" class="absolute z-on-map-2 left-0 divide-y divide-gray-200 w-full border-2 border-gray-400">
                <div class="cursor-pointer flex items-center bg-white border-black px-2 py-2">
                    <p title="Aucun résultat" class="text-sm">
                        Aucun résultat trouvé
                    </p>
                </div>
            </div>
        }
    </div>
</div>